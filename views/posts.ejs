<% posts.forEach(post=> { %>

<div style="
  width: 100%;
  max-width: 600px;
  margin: 25px auto;
  background: #fff;
  border: 1px solid #dbdbdb;
  border-radius: 12px;
  box-shadow: 0px 2px 8px rgba(0,0,0,0.04);
  overflow: hidden;
  font-family: 'Arial', sans-serif;
">

  <!-- POST HEADER -->
  <div style="
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 14px 18px;
    border-bottom: 1px solid #eee;
  ">
    <div style="font-weight: 600; font-size: 16px; display: flex; align-items: center; gap: 10px;">
      <span>@<%= post.author.username %></span>
    </div>

    <!-- FOLLOW BUTTON -->
    <div>
      <%- include('partials/followButton', { author: post.author, currentUser: user }) %>
    </div>
  </div>

  <!-- POST BODY -->
  <div style="padding: 18px;">
    <h5 style="
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 10px;
      color: #333;
    ">
      <%= post.postTitle %>
    </h5>

    <p style="
      font-size: 15px;
      color: #555;
      margin-bottom: 10px;
      line-height: 1.5;
    ">
      <%= post.content %>
    </p>

    <p style="
      color: #888;
      font-size: 13px;
      margin-bottom: 15px;
    ">
      Posted by <strong>@<%= post.author.username %></strong>
    </p>

    <!-- ACTIONS -->
    <div style="display: flex; align-items: center; gap: 18px; margin-bottom: 12px;">
      <button type="submit"
        class="like-btn"
        data-post-id="<%= post._id %>"
        style="
          background: none;
          border: none;
          font-size: 20px;
          cursor: pointer;
          color: #e63946;
        ">
        ‚ô•Ô∏è <span class="like-count">(<%= post.likes.length %>)</span>
      </button>

      <button class="comment-btn"
        data-post-id="<%= post._id %>"
        style="
          background: none;
          border: none;
          font-size: 20px;
          cursor: pointer;
          color: #1d3557;
        ">
        üí¨ <span id="comment-count-<%= post._id %>">(<%= post.comments.length %>)</span>
      </button>
    </div>

    <!-- COMMENT BOX -->
    <div id="comments-box-<%= post._id %>"
      class="comment-box"
      style="display: none; margin-top: 10px;">
      <%- include('commentBox' , {post: post }) %>
      <%- include('commentForm', { postId: post._id }) %>
    </div>
  </div>

</div>

<% }); %>